@using Golf4.Models
@using System.Data
@model ContestModels
@{
    ViewBag.Title = "Tävlingar";
}
<h2>@ViewBag.Title</h2>
<hr />

<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/pdfmake-0.1.18/dt-1.10.13/af-2.1.3/b-1.2.4/b-colvis-1.2.4/b-html5-1.2.4/b-print-1.2.4/fh-3.1.2/r-2.1.1/sc-1.4.2/se-1.2.0/datatables.min.css" />
<script type="text/javascript" src="https://cdn.datatables.net/v/dt/pdfmake-0.1.18/dt-1.10.13/af-2.1.3/b-1.2.4/b-colvis-1.2.4/b-html5-1.2.4/b-print-1.2.4/fh-3.1.2/r-2.1.1/sc-1.4.2/se-1.2.0/datatables.min.js"></script>

@if (User.IsInRole("2"))
{
    <a class="btn btn-default" href="~/Contest/create">Skapa ny tävling</a>
    <br />
    <hr />
}

<div>
    <h3>Kommande tävlingar</h3><br/>
    <table id="contests" class="dt-responsive no-wrap" style="width: 100%;">
        <thead>
            <tr>
                @foreach (DataColumn item in Model.AllContests.Columns)
                {
                    <th> @item.ColumnName</th>
                }

            </tr>
        </thead>
        <tbody>
            @foreach (DataRow row in Model.AllContests.Rows)
            {
                <tr>
                    @foreach (DataColumn item in Model.AllContests.Columns)
                    {
                        <td>
                            @if (item.ColumnName == "id")
                            {
                                if (User.IsInRole("2"))
                                {
                                    @Html.ActionLink("Hantera medlemmar", "Admin", "Contest", new { cont = row[item.ColumnName] }, null) <br />
                                    @Html.ActionLink("Ändra tävlingsinfo", "edit", "Contest", new { cont = row[item.ColumnName] }, null)  <br />
                                    @Html.ActionLink("Ta bort tävling", "delete", "Contest", new { cont = row[item.ColumnName] }, new { onclick = "return confirm('Vill du ta bort denna tävling?');" })
                                }
                                else
                                {
                                    @Html.ActionLink("Boka", "Member", "Contest", new { cont = row[item.ColumnName] }, null)
                                }
                            }
                            else
                            {
                                @row[item.ColumnName];
                            }

                        </td>
                    }
                </tr>
            }
        </tbody>
    </table>
    <hr />
</div>
<div>
     <h3>Avslutade tävlingar</h3><br />
    <table id="publishedcontests" class="dt-responsive no-wrap" style="width: 100%;">
        <thead>
            <tr>
                @foreach (DataColumn item in Model.PublishedContests.Columns)
                {
                    <th> @item.ColumnName</th>
                }

            </tr>
        </thead>
        <tbody>
            @foreach (DataRow row in Model.PublishedContests.Rows)
            {
                <tr>
                    @foreach (DataColumn item in Model.PublishedContests.Columns)
                    {
                        <td>
                            @if (item.ColumnName == "id")
                            {
                                @Html.ActionLink("Visa resultat", "ResultList", "Contest", new { cont = row[item.ColumnName] }, null)
                               
                            }
                            else
                            {
                                @row[item.ColumnName];
                            }

                        </td>
                    }
                </tr>
            }
        </tbody>
    </table>


    <script>
    $(document).ready(function () {
                $('#contests').DataTable({
                    language: {
                        url: '//cdn.datatables.net/plug-ins/1.10.12/i18n/Swedish.json'
                    },
                    responsive: true
                })
            }
        );


    $(document).ready(function () {
        $('#publishedcontests').DataTable({
            language: {
                url: '//cdn.datatables.net/plug-ins/1.10.12/i18n/Swedish.json'
            },
            responsive: true
        })
    }
    );

    </script>
</div>

